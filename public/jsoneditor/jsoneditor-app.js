function Notify(){this.dom={};var a=this;jsoneditor.util.addEventListener(document,"keydown",function(b){a.onKeyDown(b)})}function Splitter(a){if(!a||!a.container)throw new Error("params.container undefined in Splitter constructor");var b=this;jsoneditor.util.addEventListener(a.container,"mousedown",function(a){b.onMouseDown(a)}),this.container=a.container,this.snap=Number(a.snap)||200,this.width=void 0,this.value=void 0,this.onChange=a.change?a.change:function(){},this.params={}}Notify.prototype.showNotification=function(a){return this.showMessage({type:"notification",message:a,closeButton:!1})},Notify.prototype.showError=function(a){return this.showMessage({type:"error",message:a.message?"Error: "+a.message:a.toString(),closeButton:!0})},Notify.prototype.showMessage=function(a){var b=this.dom.frame;if(!b){var c=500,d=5,e=document.body.offsetWidth||window.innerWidth;b=document.createElement("div"),b.style.position="absolute",b.style.left=(e-c)/2+"px",b.style.width=c+"px",b.style.top=d+"px",b.style.zIndex="999",document.body.appendChild(b),this.dom.frame=b}var f=a.type||"notification",g=a.closeButton!==!1,h=document.createElement("div");h.className=f,h.type=f,h.closeable=g,h.style.position="relative",b.appendChild(h);var i=document.createElement("table");i.style.width="100%",h.appendChild(i);var j=document.createElement("tbody");i.appendChild(j);var k=document.createElement("tr");j.appendChild(k);var l=document.createElement("td");if(l.innerHTML=a.message||"",k.appendChild(l),g){var m=document.createElement("td");m.style.textAlign="right",m.style.verticalAlign="top",k.appendChild(m);var n=document.createElement("button");n.innerHTML="&times;",n.title="Close message (ESC)",m.appendChild(n);var o=this;n.onclick=function(){o.removeMessage(h)}}return h},Notify.prototype.removeMessage=function(a){var b=this.dom.frame;if(!a&&b){for(var c=b.firstChild;c&&!c.closeable;)c=c.nextSibling;c&&c.closeable&&(a=c)}a&&a.parentNode==b&&a.parentNode.removeChild(a),b&&0==b.childNodes.length&&(b.parentNode.removeChild(b),delete this.dom.frame)},Notify.prototype.onKeyDown=function(a){var b=a.which;27==b&&(this.removeMessage(),a.preventDefault(),a.stopPropagation())},Splitter.prototype.onMouseDown=function(a){var b=this,c=a.which?1==a.which:1==a.button;c&&(jsoneditor.util.addClassName(this.container,"active"),this.params.mousedown||(this.params.mousedown=!0,this.params.mousemove=jsoneditor.util.addEventListener(document,"mousemove",function(a){b.onMouseMove(a)}),this.params.mouseup=jsoneditor.util.addEventListener(document,"mouseup",function(a){b.onMouseUp(a)}),this.params.screenX=a.screenX,this.params.changed=!1,this.params.value=this.getValue()),a.preventDefault(),a.stopPropagation())},Splitter.prototype.onMouseMove=function(a){if(void 0!=this.width){var b=a.screenX-this.params.screenX,c=this.params.value+b/this.width;c=this.setValue(c),c!=this.params.value&&(this.params.changed=!0),this.onChange(c)}a.preventDefault(),a.stopPropagation()},Splitter.prototype.onMouseUp=function(a){if(jsoneditor.util.removeClassName(this.container,"active"),this.params.mousedown){jsoneditor.util.removeEventListener(document,"mousemove",this.params.mousemove),jsoneditor.util.removeEventListener(document,"mouseup",this.params.mouseup),this.params.mousemove=void 0,this.params.mouseup=void 0,this.params.mousedown=!1;var b=this.getValue();this.params.changed||(0==b&&(b=this.setValue(.2),this.onChange(b)),1==b&&(b=this.setValue(.8),this.onChange(b)))}a.preventDefault(),a.stopPropagation()},Splitter.prototype.setWidth=function(a){this.width=a},Splitter.prototype.setValue=function(a){a=Number(a),void 0!=this.width&&this.width>this.snap&&(a<this.snap/this.width&&(a=0),a>(this.width-this.snap)/this.width&&(a=1)),this.value=a;try{localStorage.splitterValue=a}catch(b){console&&console.log&&console.log(b)}return a},Splitter.prototype.getValue=function(){var a=this.value;if(void 0==a)try{void 0!=localStorage.splitterValue&&(a=Number(localStorage.splitterValue),a=this.setValue(a))}catch(b){console.log(b)}return void 0==a&&(a=this.setValue(.5)),a};var treeEditor=null,codeEditor=null,jsoneditor_app={};jsoneditor_app.CodeToTree=function(){try{treeEditor.set(codeEditor.get())}catch(a){jsoneditor_app.notify.showError(jsoneditor_app.formatError(a))}},jsoneditor_app.treeToCode=function(){try{codeEditor.set(treeEditor.get())}catch(a){jsoneditor_app.notify.showError(jsoneditor_app.formatError(a))}},jsoneditor_app.load=function(a){a=a||{bootstrapEnabled:!0};try{jsoneditor_app.notify=new Notify;var b={array:[1,2,3],"boolean":!0,"null":null,number:123,object:{a:"b",c:"d",e:"f"},string:"Hello World"};if(window.QueryParams){var c=new QueryParams,d=c.getValue("url");d&&(b={},jsoneditor_app.openUrl(d))}jsoneditor_app.lastChanged=void 0;var e=document.getElementById("codeEditor");codeEditor=new jsoneditor.JSONEditor(e,{mode:"code",change:function(){jsoneditor_app.lastChanged=codeEditor},error:function(a){jsoneditor_app.notify.showError(jsoneditor_app.formatError(a))}}),codeEditor.set(b),e=document.getElementById("treeEditor"),treeEditor=new jsoneditor.JSONEditor(e,{mode:"tree",change:function(){jsoneditor_app.lastChanged=treeEditor},error:function(a){jsoneditor_app.notify.showError(jsoneditor_app.formatError(a))}}),treeEditor.set(b),jsoneditor_app.splitter=new Splitter({container:document.getElementById("drag"),change:function(){jsoneditor_app.resize()}});var f=document.getElementById("toTree");f.onclick=function(){this.focus(),jsoneditor_app.CodeToTree()};var g=document.getElementById("toCode");if(g.onclick=function(){this.focus(),jsoneditor_app.treeToCode()},jsoneditor.util.addEventListener(window,"resize",jsoneditor_app.resize),codeEditor.focus(),document.body.spellcheck=!1,a.bootstrapEnabled){container_parent=e.parentNode.parentNode;for(var h=[],i=!1,j=0;3>j;j++)container_parent=container_parent.parentNode,h.push(container_parent);if(i=!0)for(var j=0;j<h.length;j++);document.getElementById("auto").style.height="400px"}}catch(k){try{jsoneditor_app.notify.showError(k)}catch(l){console&&console.log&&console.log(k),alert(k)}}},jsoneditor_app.openCallback=function(a,b){if(a)jsoneditor_app.notify.showError(a);else if(null!=b){codeEditor.setText(b);try{var c=jsoneditor.util.parse(b);treeEditor.set(c)}catch(a){treeEditor.set({}),jsoneditor_app.notify.showError(jsoneditor_app.formatError(a))}}},jsoneditor_app.formatError=function(a){var b='<pre class="error">'+a.toString()+"</pre>";return"undefined"!=typeof jsonlint&&(b+='<a class="error" href="http://zaach.github.com/jsonlint/" target="_blank">validated by jsonlint</a>'),b},jsoneditor_app.clearFile=function(){var a={};codeEditor.set(a),treeEditor.set(a)},jsoneditor_app.resize=function(){var a=document.getElementById("treeEditor"),b=document.getElementById("codeEditor"),c=document.getElementById("splitter"),d=document.getElementById("buttons"),e=document.getElementById("drag"),f=15;if(width=a.parentNode.offsetWidth,jsoneditor_app.splitter){jsoneditor_app.splitter.setWidth(width);var g=jsoneditor_app.splitter.getValue(),h=g>0,i=1>g,j=h&&i;d.style.display=j?"":"none";var k,l=c.clientWidth;if(h)if(i){k=width*g-l/2;var m=8==jsoneditor.util.getInternetExplorerVersion();e.innerHTML=m?"|":"&#8942;",e.title="Drag left or right to change the width of the panels"}else k=width*g-l,e.innerHTML="&lsaquo;",e.title="Drag left to show the tree editor";else k=0,e.innerHTML="&rsaquo;",e.title="Drag right to show the code editor";b.style.display=0==g?"none":"",b.style.width=Math.max(Math.round(k),0)+"px",codeEditor.resize(),e.style.height=c.clientHeight-d.clientHeight-2*f-(j?f:0)+"px",e.style.lineHeight=e.style.height,a.style.display=1==g?"none":"",a.style.left=Math.round(k+l)+"px",a.style.width=Math.max(Math.round(width-k-l-2),0)+"px"}},window.onload=function(){jsoneditor_app.load(),jsoneditor_app.resize()};